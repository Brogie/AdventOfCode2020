using System;
using System.Numerics;
using System.Text;
using System.Threading;

namespace day3
{
    class Program
    {
        static string[] xmap =
        {
            "..##.......",
            "#...#...#..",
            ".#....#..#.",
            "..#.#...#.#",
            ".#...##..#.",
            "..#.##.....",
            ".#.#.#....#",
            ".#........#",
            "#.##...#...",
            "#...##....#",
            ".#..#...#.#"
        };

        static string[] map =
        {
            ".#......#..####.....#..#.......",
            "#.#...#...#..#.#...#.#...##.##.",
            "#.#....#..........#...##.....##",
            "#.#.#.....##......#.#.......###",
            "..#..###....#.#....#.#.#..#....",
            ".......#.#....##..##...#...#...",
            "..#..#..#..###.......#.....#.#.",
            ".#.......#...##...##.##......##",
            "#.#.##..##.#..#....#..###..#.#.",
            "#.....#.#.........#.....##.#.#.",
            "..#.#....##..#...#...##........",
            "......#....#..##.#.#......###..",
            ".......#.......#......##...#...",
            ".##.....#.......#...###.....##.",
            ".#...#.##..##.#..##....#.......",
            "..#......##...#..#...#.#.##.###",
            ".##.##.....##....#..#......#.#.",
            ".#.....#..###..#.##.#.....##.#.",
            "......##..........#..........#.",
            ".##....#.....#..##.#..#.#..###.",
            "..##.......#....#...##...#..#..",
            ".##...#.....#.###.#.#..#...#.#.",
            ".....##.#.##..##...#...........",
            "..#..###.##.#.#.###...###..#.#.",
            ".#........#..#.#........#.#...#",
            "....##.......#....#.#.##.#.....",
            "....##........######..###..#.#.",
            "#.#.#............#.......#..#..",
            "...##...#.##.....#.#..#......#.",
            "......#.##.#....##..#.#..###...",
            "##.....#.#....#....#.##.#.###..",
            "#..#..#..##.#..##.##.##.#.##...",
            ".###.####..#..#........#.....##",
            ".......##..#.......#...........",
            ".##...#............#.#.##...#..",
            "....##.....#...##..#..#.#..###.",
            "...#.....#####.#..#...##....##.",
            "#.....#.#.#....##.......##.#.#.",
            "......#.#..#.##.#######......#.",
            "#.##...##....#..###.#.......#..",
            ".....##...#....#...#....##.##.#",
            "....###......#...###..#......##",
            "..#...##..##.######..#.#......#",
            "......##....#....##..#......##.",
            ".#...#..##..#.###.#......#....#",
            "##....##..#..####.#.....#...#..",
            ".#.......#...#.......##......#.",
            "......#...#...#........#.......",
            ".#........#.###...#..####.#..#.",
            "##...#.#............#.....###..",
            ".....###.#.##...........###..#.",
            ".#.#...#.....#.#.##..##...####.",
            "..##.......#..#.##.#....#.....#",
            ".#..#.#..####.....###.#.....#..",
            "..#..###.....####..#.##.#.#.##.",
            ".###..#.....#......#...####....",
            "...#.#..#.#..#...#...#....##.##",
            "..###....#.##.....#..........#.",
            "###...#####......##............",
            "..###.....#........##.#...#..#.",
            "..##.##.#.....##........##..#.#",
            "##..#.#...#.#..#..###.#....#..#",
            "....#..#.#.....#..#####...#....",
            "....#.........#......##.##.....",
            ".#...####.##......##..##.#..#.#",
            "...#...#.##..#...##..###...#...",
            "###...#.....#.##.###.###..#.#..",
            "..#......#.###.....#..##.#...#.",
            "#.....##.########...#####....#.",
            "........##..#..##..##.#........",
            "....#.######....##..#..#.##..#.",
            "#.......#..##..#..#.#.#..##.##.",
            "...#.#..#..#.......#......###.#",
            ".#.#..#.#..#.##.#.............#",
            "#....#.##.#.#.....#..#.#..#....",
            "...###..#...#....#.........#.#.",
            ".#..#.....##..#.#..#.#.......#.",
            "..#...##...#......#......####..",
            "....#..#.......#.......#.#..#..",
            "#...#..#...........#.#..#.....#",
            "#...#.#.......#...#....###....#",
            ".#..#.#.##....#......#........#",
            "..#...#..##..#..#..#..#...#.#..",
            "..#.#.........#....#....##.....",
            "##.....##.#.#.#.........##.....",
            ".##...#.##...........#...#...##",
            ".##..##.#.#..........##..##....",
            "#....#....#.#...#.#..#....#.#..",
            "####....##.....#..##.###.......",
            "#..#....#......##.#.#....#.....",
            ".....#....#.###.##.........###.",
            "#.......#.####..#..#..##.......",
            "##.#.......#..##..#....#..#.#..",
            "..###...#.#...#.....##.##.####.",
            "....#...#.#....#..#..#.....#.##",
            "#.....##.#.#..#.##..#..##......",
            "................###..#....##...",
            "..#.##.....#..........##.#...#.",
            "..#.#..#.#....#.#.#..#..#..#.#.",
            "#...#..##.#.#...#..#...#..#....",
            "#..#.#.........#..###........#.",
            ".#...#.............#..###..#..#",
            "#.........#.#..#...#.#.....#..#",
            "....#..#..#.#.#...#...#.....##.",
            "##...###.#.####..#......#...#..",
            "..#..##...#.#......#.#.......#.",
            "#......###....##.#.##..........",
            "#####....###..#...............#",
            "##.#...####....#....#...#....#.",
            ".#.......#..#.....#...#.....###",
            "...#..#.#.#....##......##...#..",
            "...#.....#...#.##.#..#.#....#..",
            "#...###....#...#.#....#........",
            ".#.......#........#...##.##.##.",
            ".....#....#...##.....##...###.#",
            "....#....#.#..#...##.##.##.....",
            ".......#............#...#.#..#.",
            ".#............#.....##.......#.",
            "........#....#....##......##.##",
            ".......##..#.#..#.##..###..##.#",
            "#..##..##.........####.#.###...",
            "#....#..#...##...#.............",
            "#...#...###..........##..#..#..",
            "....#...#..#.....##...#........",
            "#.....#......#.#.....#...#..#..",
            "..#.....#.....#....#..#........",
            "..#..#.....#.#.........#..###..",
            "................###..#.#....#..",
            "#.....#.....#.#.#.#.#..#...#.#.",
            "#....#....#.#..........#.#....#",
            "....#..#......#..##.#...##.....",
            "..#.#...#.####....#.#..#.#..#..",
            ".........##......#.....##......",
            "##.#.###.#.....#.....####.#..#.",
            ".....#.....#..#....#..###.#....",
            "##..#.#...#.##....#....#.......",
            ".....#......#.#...##..#.#......",
            "....##..#...#...##..##.#....#.#",
            "............#..........##.#....",
            "##..#..#.##..##..#.#....#.#.#..",
            ".......#.#...#...#.#...#..#....",
            "#....#.#...#...#........#..#...",
            "...........#.......#...##..###.",
            ".#..##......#.##.........##..#.",
            "...#...#...###.#.##....##.#..#.",
            "#...#..#.#.#.....##..#.......#.",
            ".##..#.###.##......#.#....#.#.#",
            "..#....#.......#..#..#.#.#.##..",
            "#...#...###...###.........#....",
            ".#.#...#.....##.#.#..#....#.##.",
            ".........#.#.##.....#.#.###....",
            "...#.#...#......#...####......#",
            "...##..##....##......##...###..",
            "###...#..#.......##.....#....#.",
            "...#..#..#..###...##.##..#..#..",
            "...#......#......##..#.#.##..#.",
            "...#.........#....#.#....#.#...",
            "##................#..#.#.....#.",
            "....#.##...#..#.##...##.#.....#",
            "......#..##.##..###.#..#.##.##.",
            ".#.#...###.....###.....##...###",
            ".##.....#.#.#..#..###..#..#..#.",
            "#.......#..#..#....##.....#....",
            "...#.#.##..#..#......##.##...#.",
            "....##.#......#...#..#..#......",
            ".####.#..#.....#..##.#...##..##",
            "..#..#...#..........###..#....#",
            ".#.#.##.##...#............#....",
            "........##..##......#.##..#.###",
            "...#.#....###......##.......#..",
            "..##...#...#.#..#.....#.....#..",
            "##..#...###..#..#.#.#...#...#..",
            ".....#..#....##.....##.....###.",
            "....##...###.#..#.#....##..#..#",
            "#......#...#....#......#...##..",
            "....#.##...#.#......#.#.##...#.",
            ".......#.....#...#####...#.#...",
            "...#.....##.#............#.....",
            "...#.#........#.#.#..#.........",
            "....###......#.#.#..#.####.#..#",
            "#.....#.#.#.....#.#.#.....#..#.",
            "..##.##......#...#.#...........",
            "###..###....#.#####......###...",
            "..##..............##.#.#....#.#",
            "#..#...#..........#..#.#.#..###",
            "##.###............#....#.#...#.",
            "#.#..#.#..##.#.#....#...#......",
            "#....#...#..##.....#..#.#..###.",
            "..#.....#.#....#.#..#.##.#..##.",
            "...##...#.#.##...#....###....#.",
            "......###.####.......#..#.#.#.#",
            ".#..............##........#....",
            "...##.##...##....#..#.......#..",
            ".....#.....#....###...#..#..#.#",
            ".#.....#..#.....#......#.....##",
            "#.#.##.#..#..#.....#.##..###...",
            "..#......#...##.###..#.#...#..#",
            "......#.....#...##......#......",
            "##.#........#..........#.....#.",
            "#........##.#............##....",
            "...#......##...#.#.....##......",
            "...##.......#....#.#..#.#.###..",
            "..#....##..##.##.....###....#..",
            "..#...#.#...#.....#..........#.",
            "......#...#...#.#.##.#...#.#.#.",
            ".#...#......#.##........#......",
            ".##.##..#....#...#.#...##......",
            "#..#......#.#...........#....#.",
            "....##.#....#...#..#....#.#..##",
            "#....##.##....#.#..##.#........",
            ".##.##.#....##.....#..#....#..#",
            "...#...#.....###.#.##..........",
            "....#...#....##.......###......",
            "#.........#......#.#.......#...",
            "#..........#..##..#.#..........",
            ".....#.......#..##.##....##...#",
            "........................#.#....",
            "#..#.........#.............#..#",
            "#..#.....#.......#....#....#.#.",
            "..##..##.......##....#...#.....",
            ".##......#..##......#.###......",
            "...#.#........#.......##..###..",
            "..##...###.###......#...#....##",
            "#...#...#.....###.#.#.#..#.....",
            "#....#.........#..##...#...##..",
            "#..###..#.#.#.##.#..#.#....#.##",
            "#...#.#.....#.###.#.......#....",
            "..##..#..#....#.#...........#.#",
            "#.........#.#......#...##......",
            ".######......#..#....#.#.#....#",
            "##..#.#..####.###.........#....",
            "###########.....##.##...#..#...",
            "#...##.#.#....#.#....#......#..",
            "...#..##..#..##..#......#....#.",
            ".#....#...#....#.#..##....##...",
            "#..#.#............#....#.#...#.",
            "...#...#..#.#.##......#..#.#...",
            "#.#...##.....#..#.##......####.",
            ".#.#..##..#.....#.#..#.##......",
            "#.#.##......##.....#..#.#..#...",
            "#..##...#.##.#.......#.##......",
            "..#.......#.#.#...##..##...#...",
            ".#...#..#..#.#.........#..##...",
            "#..#.......#....#.#...#.###...#",
            ".......#..#.......##.#.#...#.#.",
            ".#.................###.#..###..",
            "..........#.#.....##..#####...#",
            "#......#.#..##.#.#...#.##.#....",
            "#......#.#..##.##.#...#....#...",
            "....#..#......#....#....#######",
            ".#...#......#....###......#.###",
            "#.#....#.#...#.###......#..#..#",
            ".###......#.#...#.####.#..####.",
            "######.#.....###.#...#.#.....#.",
            ".#.###....#..#.#.....#.....####",
            ".......###.#.........#..#......",
            "#...#.....##.#......####.......",
            "..#.#..##.#.#...#...#..##..##..",
            ".....#...##.....#...##......##.",
            "##..#..#.##..#.#......#.....#..",
            "##.........#.#.##.#..#.#....#.#",
            ".#........###...#.........#....",
            "...#..#.#..#....####...........",
            "#.#....#..##..####.#...#.##....",
            ".#.....#.......#..........#..##",
            "...#.......#...###..#.....#..##",
            ".........#.###.#..##...#.##...#",
            ".#..........##..####...#..#.#.#",
            ".#...##...#............##...#.#",
            "...#....#.#..........#.#..#.#..",
            ".#.#...##....##.#.#.#....#.....",
            "....#..#.....#.#..#.#..#.##.###",
            ".....#.#.....#..#......#.#.#...",
            ".....#.#.#..###..#.#..###...#..",
            "#.......####...#.#..#......##.#",
            "....#..#..###......###.##....#.",
            "##.....#.....#.............#..#",
            "#..#..#...##.....##..#..#.#....",
            ".....#.#.###...#...............",
            "#.#.#.....#.#..#.#...#.......#.",
            "..##.##............#....#..##..",
            "#....##...#.....#.###...#.#....",
            "#...##.#.........#...#....#....",
            "##.##.#...#.#...###..#....##..#",
            "....#....##..#..#.......#...##.",
            ".#...#...#..#.....#..###.#..#.#",
            "....#..###......#....##....#...",
            "#.#.....#....##.#..#.#...###...",
            ".......#............#......#...",
            ".##..#.###.#.............###...",
            "..##...##.#.#.#.....#........##",
            "....#.###....#..#..#...#...#..#",
            ".....#...#...#..#....#.....##..",
            "###.#.#.....#......####.....#..",
            "#.#.###............#......#....",
            "..#.....#..#..#..#....#......#.",
            "#...######...#....#.##...##.#.#",
            "##.#.#.#..##......##.#..#.#...#",
            "............#.#..#.##....#.....",
            "......#............#.#...#..#.#",
            ".#..##...##..#.#.#..###.....##.",
            "#.###.#...........#...#....#...",
            "....##.....#...##...#...###.#.#",
            ".####.#.#.....#.#..#.#.##......",
            ".#...##......###...#..##..#.#..",
            ".#......#...#....##.....##..#..",
            "..........##.....###.##.#...#.#",
            ".#........##.#..............#..",
            "#...###..#...#.....#....#.....#",
            "...#......#..#...#...#..###.#..",
            ".#...##..#........#.......#.#..",
            ".#.#.##.........##.##......#..#",
            "#...#.#.#...#.....#.#...#.#..#.",
            "#.#..#...#...#...##..........#.",
            ".#...........#....#..#.#..#.#..",
            "#.......#......#..#...#........",
            ".....#..#...##..###..##........",
            "......#...#.....#..#.#.#....##.",
            "....##..##..##....###.##.......",
            ".#........##.#.#...#..#........",
            ".....##...##...#......#..#...#.",
            "..#.....#....###.#..##....#..#.",
            "......#..#...####.#.....##.####"
        };

        static void Main(string[] args)
        {
            Console.OutputEncoding = System.Text.Encoding.UTF8;

            Console.WriteLine(Part1(1,3));
            Console.WriteLine(Part2());
        }

        private static int Part1(int down, int right, bool visualise = true)
        {
            int treeCount = 0;
            int x = 0;
            int y = 0;
            int maxX = map[0].Length - 1;
            int maxY = map.Length - 1;

            while(y <= maxY)
            {
                if (map[y][x] == '#') {  treeCount++; }
                if(visualise)
                {
                    draw(map[y], x, treeCount);
                }
                y+=down;
                x+=right;
                if (x > maxX) { x = (x % maxX) - 1; }
            }

            return treeCount;
        }

        private static BigInteger Part2()
        {
            BigInteger output;

            output  = Part1(1, 1);
            output *= Part1(1, 3);
            output *= Part1(1, 5);
            output *= Part1(1, 7);
            output *= Part1(2, 1);

            return output;
        }

        private static void draw(string row, int pos , int count)
        {
            Console.ForegroundColor = ConsoleColor.Green;
            StringBuilder sb = new StringBuilder(row);
            sb.Replace('.', ' ');
            sb.Replace('#', '¥');
            sb.Append(" " + count);

            Console.Write(sb.ToString());
            if(sb[pos] == '¥')
            {
                Console.ForegroundColor = ConsoleColor.Red;
            } else
            {
                Console.ForegroundColor = ConsoleColor.Blue;

            }
            Console.CursorLeft = pos;
            Console.Write('☻');
            Console.CursorTop++;
            Console.CursorLeft = 0;
            
            Thread.Sleep(60);
        }
    }
}
